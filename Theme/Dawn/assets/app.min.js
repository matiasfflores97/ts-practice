(()=>{"use strict";var t=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{d(r.next(t))}catch(t){i(t)}}function c(t){try{d(r.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}d((r=r.apply(t,e||[])).next())}))};const e=new class{constructor(){this.ajaxCartDrawer=document.querySelector("#CartDrawer"),this.quantityInput=document.querySelectorAll(".product__quantity")}openDrawer(){this.ajaxCartDrawer.classList.add("drawer--opening")}closeDrawer(){this.ajaxCartDrawer.classList.remove("drawer--opening")}addItem(e){return t(this,void 0,void 0,(function*(){try{const t=yield fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,quantity:e.quantity})}),n=yield t.json();return this.buildCart(),n}catch(t){return t}}))}getCart(){return t(this,void 0,void 0,(function*(){try{const t=yield fetch("/cart.js");return yield t.json()}catch(t){return t}}))}buildCart(){return t(this,void 0,void 0,(function*(){yield this.getCart(),this.openDrawer()}))}};var n=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{d(r.next(t))}catch(t){i(t)}}function c(t){try{d(r.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}d((r=r.apply(t,e||[])).next())}))};document.addEventListener("DOMContentLoaded",(()=>{const[...t]=document.querySelectorAll("button.add-to-cart"),r=document.querySelector(".header__icon--cart"),o=document.querySelector(".drawer__close-button");t.forEach((t=>{t.addEventListener("click",(t=>n(void 0,void 0,void 0,(function*(){t.preventDefault();const n=t.target,r=n.form,o=parseInt(r.elements.id.value),i=parseInt(r.elements.quantity.value);n.classList.add("loading"),yield e.addItem({id:o,quantity:i}),n.classList.remove("loading")}))))})),r.addEventListener("click",(t=>n(void 0,void 0,void 0,(function*(){t.preventDefault(),e.openDrawer()})))),o.addEventListener("click",(t=>n(void 0,void 0,void 0,(function*(){t.preventDefault(),e.closeDrawer()}))))}))})();